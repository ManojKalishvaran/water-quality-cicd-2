trigger: none
  # branches:
  #   include:
  #     - main

pool:
  vmImage: 'ubuntu-latest'

variables:
  trainingImageName: 'water-quality-training'
  inferenceImageName: 'water-quality-inference'
  tag: 'latest'

stages:
- stage: Build
  displayName: '🔧 Build & Push Docker Images'
  jobs:
  - job: BuildTrainingImage
    displayName: 'Build Training Docker Image'
    steps:
    - checkout: self
    - task: Docker@2
      displayName: 'Build & Push Training Image to ACR'
      inputs:
        containerRegistry: 'acr-connection'  # 🔁 Replace with your actual ACR service connection
        repository: '$(training-img)'
        command: 'buildAndPush'
        Dockerfile: '**/Training/Dockerfile'
        tags: |
          $(0.1)